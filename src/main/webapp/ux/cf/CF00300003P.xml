<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
	<head>
		<w2:type>DEFAULT</w2:type>
		<w2:buildDate />
		<xf:model>
			<xf:instance>
				<data xmlns="" />
			</xf:instance>
			<w2:dataCollection baseNode="map">
				<w2:dataMap baseNode="map" id="dsSrch" style="">
					<w2:keyInfo>
						<w2:key id="enprGbCd" name="기업구분코드[CO009]" dataType="text"></w2:key>
						
						<w2:key dataType="text" id="tradeNm" name="거래처_명"></w2:key>
						<w2:key dataType="text" id="bzprRegNo" name="사업자등록번호"></w2:key>
						<w2:key dataType="text" id="corpRegNo" name="법인등록번호"></w2:key>
						<w2:key dataType="text" id="tradeCd" name="거래처코드"></w2:key><w2:key id="resNoEnc" name="주민등록번호" dataType="text"></w2:key>
						<w2:key id="jobGb" name="업무구분" dataType="text"></w2:key>
						<w2:key id="pageRowStart" name="페이지 시작행번호" dataType="number"></w2:key>
						<w2:key id="pageRowCount" name="페이지 요청건수" dataType="number"></w2:key>
					</w2:keyInfo>
				</w2:dataMap>
				<w2:dataList baseNode="list" id="dsTradeList" repeatNode="map" saveRemovedData="true" style="">
					<w2:columnInfo>
						<w2:column dataType="text" id="tradeCd" name="거래처코드"></w2:column>
						<w2:column dataType="text" id="tradeNm" name="거래처_명"></w2:column>
						<w2:column dataType="text" id="tradeAbbNm" name="거래처_약어_명"></w2:column>
						<w2:column dataType="text" id="enprGbCd" name="기업구분코드[CO009]"></w2:column>
						<w2:column dataType="text" id="enprGbCdNm" name="기업구분코드[CO009]명"></w2:column>
						<w2:column id="resNoEnc" name="주민등록번호" dataType="text"></w2:column>
						<w2:column dataType="text" id="bzprRegNo" name="사업자등록번호"></w2:column>
						<w2:column dataType="text" id="corpRegNo" name="법인등록번호"></w2:column>
						<w2:column dataType="text" id="reprNm" name="대표자_명"></w2:column>
						<w2:column dataType="text" id="foundDt" name="설립_일자"></w2:column>
						<w2:column dataType="text" id="enprScalCd" name="기업규모코드[CO01102]"></w2:column>
						<w2:column dataType="text" id="enprFormNm" name="기업_형태_명"></w2:column>
						<w2:column dataType="text" id="zipCd" name="우편번호"></w2:column>
						<w2:column dataType="text" id="baseAddr" name="기본_주소"></w2:column>
						<w2:column dataType="text" id="dtlAddr" name="상세_주소"></w2:column>
						<w2:column dataType="text" id="bzcdNm" name="업태_명"></w2:column>
						<w2:column dataType="text" id="bztpNm" name="종목_명"></w2:column>
						<w2:column dataType="text" id="telNo" name="전화번호"></w2:column>
						<w2:column dataType="text" id="faxNoCn" name="팩스번호내용"></w2:column>
						<w2:column dataType="text" id="hmpgUrl" name="홈페이지_URL"></w2:column>
						<w2:column id="tradeVendrTypeCd" name="거래처업체유형코드[CF082]" dataType="text"></w2:column>
						<w2:column dataType="text" id="tradeVendrTypeCdNm" name="거래처업체유형명[CF082]"></w2:column>
						<w2:column dataType="text" id="mbzplYn" name="주사업장_여부"></w2:column>
						<w2:column dataType="text" id="clseDt" name="폐업_일자"></w2:column>
						<w2:column dataType="text" id="taxnTypeCd" name="과세유형코드"></w2:column>
						<w2:column dataType="text" id="taxnTypeCdNm" name="과세유형코드명"></w2:column>
						<w2:column dataType="text" id="taxnTypeChgDt" name="과세_유형_변경_일자"></w2:column>
						<w2:column dataType="text" id="chgbfTaxnTypeCd" name="변경전_과세유형코드"></w2:column>
						<w2:column dataType="text" id="salesTradeYn" name="매출_거래처_여부"></w2:column>
						<w2:column dataType="text" id="purTradeYn" name="매입_거래처_여부"></w2:column>
						<w2:column id="sapTradeCd" name="SAP_거래처코드" dataType="text"></w2:column>
						<w2:column id="taxnTxfreYn" name="과세_면세_여부" dataType="text"></w2:column>
						<w2:column dataType="text" id="fstRegprId" name="최초_등록자ID"></w2:column>
						<w2:column dataType="text" id="fstRegDtm" name="최초_등록_일시"></w2:column>
						<w2:column dataType="text" id="fnlModprId" name="최종_수정자ID"></w2:column>
						<w2:column dataType="text" id="fnlModiDtm" name="최종_수정_일시"></w2:column>



						<w2:column id="bzprRegNoFormat" name="사업자등록번호 displayFormat용" dataType="text"></w2:column>
					</w2:columnInfo>
				</w2:dataList>
			</w2:dataCollection>
			<w2:workflowCollection></w2:workflowCollection>
		</xf:model>
		<script type="javascript" lazy="false"><![CDATA[
    /***************************************************************************
     * Program ID : CF00300003P.xml 
     * Program Name : 거래처 검색(팝업) 
     * Author : 김환섭 (tpkhs1)
     * Date : 2019.02.15
     * 
     * History 
     * ======================================== 
     * 변경일자     	  수정자   내 용 
     * ======================================== 
     * 2019.02.15   김환섭   최초작성
     *     
     **************************************************************************/

    /************************************************************************************
     *  [1] 전역변수 
     ************************************************************************************/
	var svcId = "";        
	var ingStatus = "";
	var cond = "";
	var jobGb = "";
    var pageRowStart = 0; 	//페이지 시작행번호
    var pageRowCount = 50; 	//페이지 요청건수

     /************************************************************************************ 
      *  [2] onpageload
      ************************************************************************************/   
     scwin.onpageload = function() { 
    	//초기화
        scwin.initScreen();
        com.selCdList("sbxKeyEnprGbCd", "CF009", "Y");		//기업구분[CF009]

        cond = JSON.parse($p.getPopupParam()).data.cond;
        dsSrch.set("jobGb"  , 'CF');
        dsSrch.set("tradeCd", JSON.parse($p.getPopupParam()).data.tradeCd);
        dsSrch.set("tradeNm", JSON.parse($p.getPopupParam()).data.tradeNm);
        
        if ( !strLib.isEmpty(dsSrch.get("tradeCd")) || !strLib.isEmpty(dsSrch.get("tradeNm")) ){
            scwin.fnSearchList();
        }
     };

	// 화면 초기화(필수)
	scwin.initScreen = function() {
        grdTradeList.initGrid();	//거래처 초기화
		com.setUdcValue("udcListCount", "udcListCount", 0);
    	pageRowStart = 0;			//페이지 시작행번호
	}; 

    /**************************************************************************
	 *  [3] 사용자정의 함수
	 **************************************************************************/
	// 조회 List
    scwin.fnSearchList = function() {
        svcId = "selectTcfTradeInfoPageList";
        ajaxLib.ajax("/cf/CF00300000U/selectTcfTradeInfoPageList", {
        	mode : "asynchronous"
        	, method : "POST"
            , requestData : dsSrch.getJSON()
            , callback : "fnCallback"
            , errCallback : "fnErrCallBack"
        });
    };
	
	/**************************************************************************
	 *  [4] Callback
	 **************************************************************************/
	// 결과 후처리
	scwin.fnCallback = function(result, e) {
	   	switch(svcId) {
	   		case "selectTcfTradeInfoPageList" :
 				//서버에서 넘겨주는 값 세팅 
				dsTradeList.setJSON(result.data.dsTcfTradeInfoList, true);  
				com.setUdcValue("udcListCount", "udcListCount", dsTradeList.getTotalRow());
                pageRowStart = pageRowStart + pageRowCount;		//다음 조회갯수 Setting

		   		ingStatus = "S";	   	 
	   			break;
 			default :
 				break; 
	   }
	};
	
	// 에러 후처리
    scwin.fnErrCallBack = function(e) {
//        console.log(e);
    };
    
    /************************************************************************************
     *  [5] Event 함수 
     ************************************************************************************/
	scwin.btnFind_onclick = function() {
    	//초기화
        scwin.initScreen();

		dsSrch.set("pageRowStart", pageRowStart);
		dsSrch.set("pageRowCount", pageRowCount);
		
		// 조회시 팝업창에서 전달한 tradecd 초기화 
		dsSrch.set("tradeCd","");
		
		//조회
		scwin.fnSearchList();
	};

	scwin.grdTradeList_onscrollend = function() {
		//총건수가 (페이지 시작행번호 + 페이지 요청건수) 보다 작으면 SKIP
		if (dsTradeList.getTotalRow() < (dsSrch.get("pageRowStart") + dsSrch.get("pageRowCount"))){
			return;
		}

		dsSrch.set("pageRowStart", pageRowStart);
		dsSrch.set("pageRowCount", pageRowCount);
		
		//조회
		scwin.fnSearchList();
	};

	scwin.btnConfirm_onclick = function() {
		scwin.fnSelectData();
	};
	
	scwin.btnCancel_onclick = function() {
		com.popup_close("");
	};
			
	scwin.grdTradeList_oncelldblclick = function(row,col) {
		scwin.fnSelectData();
	};
		
	// 데이터 선택 후 처리
	scwin.fnSelectData = function() {
		com.popup_close(JSON.stringify(dsTradeList.getRowJSON(grdTradeList.getFocusedRowIndex())));
	};
	
	//거래처코드 엔터키
	scwin.keyTradeCd_onkeyup = function(e) {
		if ( e.keyCode == 13 ){
			btnFind.trigger("onclick");
		}
	};
	
	//거래처명 엔터키
	scwin.keyTradeNm_onkeyup = function(e) {
		if ( e.keyCode == 13 ){
			btnFind.trigger("onclick");
		}
	};
	
	//사업자등록번호 엔터키
	scwin.keyBzprRegNo_onkeyup = function(e) {
		if ( e.keyCode == 13 ){
			btnFind.trigger("onclick");
		}
	};
	
	//법인등록번호 엔터키
	scwin.keyCorpRegNo_onkeyup = function(e) {
		if ( e.keyCode == 13 ){
			btnFind.trigger("onclick");
		}
	};
]]></script>
		<w2:require src="/ux/common/udc/udcListCount.xml"></w2:require>
		<w2:require src="/WEB-INF/ux/common/udc/udcListCount.xml"></w2:require>
	</head>
	<body ev:onpageload="scwin.onpageload">
    <xf:group style="" id="" class="content_body popup">
        <xf:group class="tbl_search" id="grpSearch" style="">
            <xf:group class="tb_list" id="" style="" tagname="table">
                <w2:attributes>
                    <w2:summary>조회조건 테이블 입니다.</w2:summary>
                </w2:attributes>
                <xf:group tagname="colgroup">
                    <xf:group style="width:120px;" tagname="col"></xf:group>
                    <xf:group style="width:auto;" tagname="col"></xf:group>
                    <xf:group style="width:120px;" tagname="col"></xf:group>
                    <xf:group style="width:auto;" tagname="col"></xf:group>
                    <xf:group style="width:120px;" tagname="col"></xf:group>
                    <xf:group style="width:auto;" tagname="col"></xf:group>
                    <xf:group style="width:120px;" tagname="col"></xf:group>
                    <xf:group style="width:auto;" tagname="col"></xf:group>
                </xf:group>
                <xf:group style="" tagname="tr">
                    <xf:group class="w2tb_th" style="" tagname="th">
                        <w2:attributes>
                            <w2:scope>row</w2:scope>
                        </w2:attributes>
                        <w2:span class="" id="" label="기업구분" style=""></w2:span>
                    </xf:group>
                    <xf:group class="w2tb_td" style="" tagname="td">
                    	<xf:select1 allOption="" appearance="minimal" chooseOption="true" chooseOptionLabel="전체"
                    		class="" direction="auto" disabled="false" disabledClass="w2selectbox_disabled"
                    		displayMode="label" ev:onchange="scwin.sbxEnprGbCd_onchange" id="sbxKeyEnprGbCd" mandatory="true"
                    		ref="data:dsSrch.enprGbCd" style="width:140px;" submenuSize="auto" textAlign="left">
                    		<xf:choices></xf:choices>
                    	</xf:select1>
                    </xf:group>
                    <xf:group class="w2tb_th" style="" tagname="th">
                        <w2:attributes>
                            <w2:scope>row</w2:scope>
                        </w2:attributes>
                        <w2:span class="" id="" label="거래처명" style=""></w2:span>
                    </xf:group>
                    <xf:group class="w2tb_td" style="" tagname="td">
                        <xf:input id="keyTradeNm" style="width: 140px;" ref="data:dsSrch.tradeNm" ev:onkeyup="scwin.keyTradeNm_onkeyup" maxByteLength="300"></xf:input>
                    </xf:group>
                    <xf:group class="w2tb_th" tagname="th">
                        <w2:attributes>
                            <w2:scope>row</w2:scope>
                        </w2:attributes>
                        <w2:span class="" id="" label="사업자등록번호" style=""></w2:span>
                    </xf:group>
                    <xf:group class="w2tb_td" tagname="td">
                        <w2:attributes></w2:attributes>
                        <xf:input id="keyBzprRegNo" style="width: 140px;" ref="data:dsSrch.bzprRegNo" ev:onkeyup="scwin.keyBzprRegNo_onkeyup" allowChar="0-9" maxlength="10" placeholder="___-__-_____" displayFormat="###-##-#####"></xf:input>
                    </xf:group>
                    <xf:group class="w2tb_th" style="" tagname="th">
                        <w2:attributes>
                            <w2:scope>row</w2:scope>
                        </w2:attributes>
                        <w2:span class="" id="" label="법인등록번호" style=""></w2:span>
                    </xf:group>
                    <xf:group class="w2tb_td" tagname="td">
                        <w2:attributes></w2:attributes>
                        <xf:input id="keyCorpRegNo" style="width: 140px;" ref="data:dsSrch.corpRegNo" ev:onkeyup="scwin.keyCorpRegNo_onkeyup" allowChar="0-9" maxlength="13" displayFormat="######-#######" placeholder="______-_______"></xf:input>
                    </xf:group>
                    <xf:group class="w2tb_td" tagname="td">
                        <w2:attributes></w2:attributes>
                    </xf:group>
                </xf:group>
            </xf:group>
            <xf:group class="btn_tbl_search" style="" tagname="">
                <w2:anchor class="btn_sh" id="btnFind" outerDiv="false" style="" ev:onclick="scwin.btnFind_onclick">
                    <xf:label>
                        <![CDATA[조회]]>
                    </xf:label>
                </w2:anchor>
            </xf:group>
        </xf:group>
        <xf:group style="" id="" class="defaultbox">
            <w2:textbox label="거래처 목록" style="" id="" class="df_tt" tagname="h3"></w2:textbox>
            <w2:udc_list_count id="udcListCount"></w2:udc_list_count>
        </xf:group>
        <w2:gridView autoFit="allColumn" dataList="data:dsTradeList" fixedColumnWithHidden="true" id="grdTradeList" scrollByColumn="false" style="height: 300px;" useShiftKey="true" visibleRowNum="" rowNumVisible="" rowStatusVisible="" rowStatusWidth="30" rowNumHeaderValue="No" rowStatusHeaderValue="" focusMode="row" class="autoHeight" checkDisabledOnCut="" readOnly="true" ev:oncelldblclick="scwin.grdTradeList_oncelldblclick" ev:onscrollend="scwin.grdTradeList_onscrollend">
            <w2:header id="header1" style="">
                <w2:row id="row2" style="">
                    <w2:column blockSelect="false" id="column21" inputType="text" value="거래처코드" width="100">
                    </w2:column>
                    <w2:column blockSelect="false" id="column19" inputType="text" value="거래처명" width="150">
                    </w2:column>
                    <w2:column blockSelect="false" id="column17" inputType="text" value="사업자등록번호" width="100">
                    </w2:column>
                    <w2:column blockSelect="false" id="column15" inputType="text" value="법인등록번호" width="100">
                    </w2:column>
                    <w2:column removeBorderStyle="false" width="100" inputType="text" id="column39" value="주사업장여부" blockSelect="false" displayMode="label">
                    </w2:column>
                    <w2:column removeBorderStyle="false" width="70" inputType="text" id="column47" value="과세유형" blockSelect="false" displayMode="label">
                    </w2:column>
                    <w2:column removeBorderStyle="false" width="70" inputType="text" id="column45" value="업체유형" blockSelect="false" displayMode="label">
                    </w2:column>
                    <w2:column removeBorderStyle="false" width="70" inputType="text" id="column43" value="사업자구분" blockSelect="false" displayMode="label">
                    </w2:column>
                </w2:row>
            </w2:header>
            <w2:gBody id="gBody4" style="">
                <w2:row id="row5" style="">
                    <w2:column blockSelect="false" id="tradeCd" inputType="text" style="height:24px;" width="100">
                    </w2:column>
                    <w2:column blockSelect="false" id="tradeNm" inputType="text" style="height:24px;" width="150">
                    </w2:column>
                    <w2:column blockSelect="false" id="bzprRegNoFormat" inputType="text" style="height:24px;" width="100">
                    </w2:column>
                    <w2:column blockSelect="false" id="corpRegNo" inputType="text" style="height:24px;" width="100" displayFormat="######-#######">
                    </w2:column>
                    <w2:column removeBorderStyle="false" width="100" inputType="text" id="mbzplYn" blockSelect="false" displayMode="label">
                    </w2:column>
                    <w2:column removeBorderStyle="false" width="70" inputType="text" id="taxnTypeCdNm" blockSelect="false" displayMode="label">
                    </w2:column>
                    <w2:column removeBorderStyle="false" width="70" inputType="text" id="tradeVendrTypeCdNm" blockSelect="false" displayMode="label">
                    </w2:column>
                    <w2:column removeBorderStyle="false" width="70" inputType="text" id="enprGbCdNm" blockSelect="false" displayMode="label">
                    </w2:column>
                </w2:row>
            </w2:gBody>
        </w2:gridView>
        <xf:group class="bottombox" id="" style="">
            <w2:anchor class="btn_gcm" clickEventElement="outerDiv" id="btnConfirm" outerDiv="false" style="" ev:onclick="scwin.btnConfirm_onclick">
                <xf:label>
                    <![CDATA[확인]]>
                </xf:label>
            </w2:anchor>
            <w2:anchor class="btn_gcm" clickEventElement="outerDiv" id="btnCancel" outerDiv="false" style="" ev:onclick="scwin.btnCancel_onclick">
                <xf:label>
                    <![CDATA[취소]]>
                </xf:label>
            </w2:anchor>
        </xf:group>
    </xf:group>
</body>
</html>
