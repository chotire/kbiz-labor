<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/resources/css/magnific-popup.css" type="text/css"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events"
	xmlns:w2="http://www.inswave.com/websquare" xmlns:xf="http://www.w3.org/2002/xforms">
	<head>
		<w2:type>DEFAULT</w2:type>
		<w2:buildDate />
		<xf:model>
			<xf:instance>
				<data xmlns="" />
			</xf:instance>
			<w2:dataCollection baseNode="map">
				<!-- 코드 데이터: 전체 -->
				<w2:dataList id="dl_Code" baseNode="list" repeatNode="map">
					<w2:columnInfo>
						<w2:column id="type" name="type" dataType="text" />
						<w2:column id="code" name="code" dataType="text" />
						<w2:column id="name" name="name" dataType="text" />
					</w2:columnInfo>
					<w2:data use="true">
						<w2:row>
							<type><![CDATA[01]]></type>
							<code><![CDATA[0]]></code>
							<name><![CDATA[무교]]></name>
						</w2:row>
						<w2:row>
							<type><![CDATA[01]]></type>
							<code><![CDATA[1]]></code>
							<name><![CDATA[천주교]]></name>
						</w2:row>
						<w2:row>
							<type><![CDATA[01]]></type>
							<code><![CDATA[2]]></code>
							<name><![CDATA[기독교]]></name>
						</w2:row>
						<w2:row>
							<type><![CDATA[01]]></type>
							<code><![CDATA[3]]></code>
							<name><![CDATA[불교]]></name>
						</w2:row>
						<w2:row>
							<type><![CDATA[01]]></type>
							<code><![CDATA[4]]></code>
							<name><![CDATA[기타]]></name>
						</w2:row>
						<w2:row>
							<type><![CDATA[02]]></type>
							<code><![CDATA[A]]></code>
							<name><![CDATA[A형]]></name>
						</w2:row>
						<w2:row>
							<type><![CDATA[02]]></type>
							<code><![CDATA[B]]></code>
							<name><![CDATA[B형]]></name>
						</w2:row>
						<w2:row>
							<type><![CDATA[02]]></type>
							<code><![CDATA[O]]></code>
							<name><![CDATA[O형]]></name>
						</w2:row>
						<w2:row>
							<type><![CDATA[02]]></type>
							<code><![CDATA[AB]]></code>
							<name><![CDATA[AB형]]></name>
						</w2:row>
					</w2:data>
				</w2:dataList>
				<!-- 코드 데이터: 01 -->
				<w2:linkedDataList id="ldl_religion" bind="dl_Code">
					<w2:condition type="filter"><![CDATA[ type == '01' ]]></w2:condition>
					<w2:condition type="sort"><![CDATA[]]>
					</w2:condition>
				</w2:linkedDataList>
				<!-- 코드 데이터: 02 -->
				<w2:linkedDataList id="ldl_blood" bind="dl_Code">
					<w2:condition type="filter"><![CDATA[ type == "02" ]]></w2:condition>
					<w2:condition type="sort"><![CDATA[]]>
					</w2:condition>
				</w2:linkedDataList>
				<!-- 컬럼 유형 그리드뷰 데이터 -->
				<w2:dataList id="dl_sample01" baseNode="list" saveRemovedData="false" repeatNode="map">
					<w2:columnInfo>
						<w2:column id="col1" name="text" dataType="text" />
						<w2:column id="col2" name="link" dataType="text" />
						<w2:column id="col3" name="checkbox" dataType="text" />
						<w2:column id="col4" name="button" dataType="text" />
						<w2:column id="col5" name="image" dataType="text" />
						<w2:column id="col6" name="radio" dataType="text" />
						<w2:column id="col7" name="select" dataType="text" />
						<w2:column id="col8" name="calendar" dataType="text" />
						<w2:column id="col9" name="expression" dataType="text" />
						<w2:column id="col10" name="textarea" dataType="text" />
						<w2:column id="col11" name="textImage" dataType="text" />
						<w2:column id="col12" name="checkcombobox" dataType="text" />
						<w2:column id="col13" name="autoComplete" dataType="text" />
						<w2:column id="col14" name="secret" dataType="text" />
					</w2:columnInfo>
					<w2:data use="true">
						<w2:row>
							<col1><![CDATA[텍스트1]]></col1>
							<col2><![CDATA[http://www.google.com/]]></col2>
							<col3><![CDATA[true]]></col3>
							<col4><![CDATA[버튼1]]></col4>
							<col5><![CDATA[/resources/images/content/btn_cmm.png]]></col5>
							<col6><![CDATA[true]]></col6>
							<col7><![CDATA[M]]></col7>
							<col8><![CDATA[20160906]]></col8>
							<col9 />
							<col10><![CDATA[긴 텍스트 긴 텍스트 긴 텍스트 긴 텍스트 긴 텍스트]]></col10>
							<col11><![CDATA[텍스트+이미지1]]></col11>
							<col12><![CDATA[M F]]></col12>
							<col13><![CDATA[0]]></col13>
							<col14><![CDATA[password]]></col14>
						</w2:row>
						<w2:row>
							<col1><![CDATA[텍스트2]]></col1>
							<col2><![CDATA[http://www.naver.com/]]></col2>
							<col3><![CDATA[false]]></col3>
							<col4><![CDATA[버튼2]]></col4>
							<col5><![CDATA[/resources/images/content/btn_cmm.png]]></col5>
							<col6><![CDATA[false]]></col6>
							<col7><![CDATA[F]]></col7>
							<col8><![CDATA[20160907]]></col8>
							<col9 />
							<col10><![CDATA[긴 텍스트]]></col10>
							<col11><![CDATA[텍스트+이미지2]]></col11>
							<col12><![CDATA[M]]></col12>
							<col13><![CDATA[1]]></col13>
							<col14><![CDATA[password]]></col14>
						</w2:row>
						<w2:row>
							<col1><![CDATA[텍스트3]]></col1>
							<col2><![CDATA[http://www.daum.net/]]></col2>
							<col3><![CDATA[false]]></col3>
							<col4><![CDATA[버튼3]]></col4>
							<col5><![CDATA[/resources/images/content/btn_cmm.png]]></col5>
							<col6><![CDATA[false]]></col6>
							<col7><![CDATA[F]]></col7>
							<col8><![CDATA[20160908]]></col8>
							<col9 />
							<col10><![CDATA[긴 텍스트]]></col10>
							<col11><![CDATA[텍스트+이미지3]]></col11>
							<col12><![CDATA[F]]></col12>
							<col13 />
							<col14><![CDATA[password]]></col14>
						</w2:row>
						<w2:row>
							<col1><![CDATA[텍스트4]]></col1>
							<col2><![CDATA[http://www.inswave.com/]]></col2>
							<col3><![CDATA[false]]></col3>
							<col4><![CDATA[버튼4]]></col4>
							<col5><![CDATA[/resources/images/content/btn_cmm.png]]></col5>
							<col6><![CDATA[false]]></col6>
							<col7><![CDATA[M]]></col7>
							<col8><![CDATA[20160909]]></col8>
							<col9 />
							<col10><![CDATA[긴 텍스트]]></col10>
							<col11><![CDATA[텍스트+이미지4]]></col11>
							<col12><![CDATA[F]]></col12>
							<col13><![CDATA[2]]></col13>
							<col14><![CDATA[password]]></col14>
						</w2:row>
					</w2:data>
				</w2:dataList>
				<!--
					[dlCommonCodes]
					grpCd: 그룹코드, grpCdName: 그룹코드명, commCd: 코드, cdName: 코드명,
					classCd: 중분류코드, applId: 시스템모듈구분, carrCd: 항공사코드
				-->
				<!-- 항공사 공통코드 (00010) -->
				<w2:linkedDataList id="ldlCode00010" bind="dlCommonCodes">
					<w2:condition type="filter"><![CDATA[grpCd == '00010']]></w2:condition>
					<w2:condition type="sort"><![CDATA[ASC('commCd')]]></w2:condition>
				</w2:linkedDataList>
				<!-- 훈련Type 공통코드 (00180) -->
				<w2:linkedDataList id="ldlCode00180" bind="dlCommonCodes">
					<w2:condition type="filter"><![CDATA[grpCd == '00180']]></w2:condition>
					<w2:condition type="sort"><![CDATA[ASC('commCd')]]></w2:condition>
				</w2:linkedDataList>
				<!-- 평가종류 공통코드 (00190) -->
				<w2:linkedDataList id="ldlCode00190" bind="dlCommonCodes">
					<w2:condition type="filter"><![CDATA[grpCd == '00190']]></w2:condition>
					<w2:condition type="sort"><![CDATA[ASC('commCd')]]></w2:condition>
				</w2:linkedDataList>
				<!-- 답변타입 공통코드 (00200) -->
				<w2:linkedDataList id="ldlCode00200" bind="dlCommonCodes">
					<w2:condition type="filter"><![CDATA[grpCd == '00200']]></w2:condition>
					<w2:condition type="sort"><![CDATA[ASC('commCd')]]></w2:condition>
				</w2:linkedDataList>
				<!-- Category 공통코드 (00210) -->
				<w2:linkedDataList id="ldlCode00210" bind="dlCommonCodes">
					<w2:condition type="filter"><![CDATA[grpCd == '00210']]></w2:condition>
					<w2:condition type="sort"><![CDATA[ASC('commCd')]]></w2:condition>
				</w2:linkedDataList>
				<!-- 사용여부 -->
				<w2:dataList id="dlActiveFlg" baseNode="list" saveRemovedData="false" repeatNode="map">
					<w2:columnInfo>
						<w2:column id="code" name="사용여부코드" dataType="text" />
						<w2:column id="name" name="사용여부명" dataType="text" />
					</w2:columnInfo>
					<w2:data use="true">
						<w2:row>
							<code><![CDATA[Y]]></code>
							<name><![CDATA[Y]]></name>
						</w2:row>
						<w2:row>
							<code><![CDATA[N]]></code>
							<name><![CDATA[N]]></name>
						</w2:row>
					</w2:data>
				</w2:dataList>
				<!-- 과정/교관평가 설문조사문항관리 문항 조회 -->
				<w2:dataList baseNode="list" repeatNode="map" id="dlDataMainList" saveRemovedData="false">
					<w2:columnInfo>
						<w2:column id="questionNbr" name="문항ID" dataType="text" />
						<w2:column id="carrCd" name="항공사코드" dataType="text" />
						<w2:column id="trngTyp" name="훈련타입" dataType="text" />
						<w2:column id="pollTyp" name="평가종류" dataType="text" />
						<w2:column id="questionCategory" name="문항카테고리" dataType="text" />
						<w2:column id="questionCategoryName" name="문항카테고리명" dataType="text" />
						<w2:column id="questionTxt" name="문제한글" dataType="text" />
						<w2:column id="questionTxtEng" name="문제영문" dataType="text" />
						<w2:column id="answerTyp" name="답변형식" dataType="text" />
						<w2:column id="text" name="답변형식" dataType="text" />
						<w2:column id="sortOrdr" name="문항순서" dataType="text" />
						<w2:column id="activeFlg" name="사용여부" dataType="text" />
						<w2:column id="inputDate" name="등록일" dataType="text" />
						<w2:column id="inputUsrId" name="등록한사람" dataType="text" />
						<w2:column id="modifyDate" name="수정일" dataType="text" />
						<w2:column id="modifyUsrId" name="수정한사람" dataType="text" />
					</w2:columnInfo>
				</w2:dataList>
				<!-- 과정/교관평가 설문조사문항관리 문항 세부 조회 -->
				<w2:dataList baseNode="list" repeatNode="map" id="dlDataMainDelList" saveRemovedData="false">
					<w2:columnInfo>
						<w2:column id="questionNbr" name="문항ID" dataType="text" />
						<w2:column id="carrCd" name="항공사코드" dataType="text" />
						<w2:column id="trngTyp" name="훈련타입" dataType="text" />
						<w2:column id="pollTyp" name="평가종류" dataType="text" />
						<w2:column id="questionCategory" name="문항카테고리" dataType="text" />
						<w2:column id="questionTxt" name="문제한글" dataType="text" />
						<w2:column id="questionTxtEng" name="문제영문" dataType="text" />
						<w2:column id="answerTyp" name="답변형식" dataType="text" />
						<w2:column id="sortOrdr" name="문항순서" dataType="text" />
						<w2:column id="activeFlg" name="사용여부" dataType="text" />
						<w2:column id="inputDate" name="등록일" dataType="text" />
						<w2:column id="inputUsrId" name="등록한사람" dataType="text" />
						<w2:column id="modifyDate" name="수정일" dataType="text" />
						<w2:column id="modifyUsrId" name="수정한사람" dataType="text" />
					</w2:columnInfo>
				</w2:dataList>
				<!-- 과정/교관평가 설문조사문항관리 보기 상세 조회 -->
				<w2:dataList baseNode="list" repeatNode="map" id="dlDataDetailList" saveRemovedData="false">
					<w2:columnInfo>
						<w2:column id="questionNbr" name="문제SEQ" dataType="text" ignoreStatus="true" />
						<w2:column id="exampleNbr" name="보기SEQ" dataType="text" />
						<w2:column id="exampleTxt" name="답변한글" dataType="text" />
						<w2:column id="exampleTxtEng" name="답변영어" dataType="text" />
						<w2:column id="sortOrdr" name="순서" dataType="text" />
						<w2:column id="activeFlg" name="사용여부" dataType="text" />
						<w2:column id="inputDate" name="등록일" dataType="text" />
						<w2:column id="inputUsrId" name="등록한사람" dataType="text" />
						<w2:column id="modifyDate" name="수정일" dataType="text" />
						<w2:column id="modifyUsrId" name="수정한사람" dataType="text" />
					</w2:columnInfo>
				</w2:dataList>
			</w2:dataCollection>
		</xf:model>
		<!--
			<script type="text/javascript" src="/educ/resources/js/printmade3/server_files/PDonut.js"></script>
			<script type="text/javascript" src="/educ/resources/js/printmade3/server_files/Printmade3.js"></script>
		-->
		<script type="text/javascript" src="/resources/js/html2canvas/html2canvas.js"></script>
		
        <script type="text/javascript" src="/resources/js/lib/util/jquery.magnific-popup.min.js"></script>
		
		<script type="text/javascript"><![CDATA[
	/**************************************************************************
	 * [1] 초기화
	 **************************************************************************/

	scwin.initScreen = function() {
		//공통코드셋팅 항공사코드(00010), 훈련타입(00180), 평가종류(00190)
		commLib.getCommonCodeList(
				["00010", "00180", "00190", "00200", "00210"], function() {
					sbxActiveFlg.setValue("Y");
					scwin.btnSearch_onclick();
				});
	};

    scwin.onpageload = function() {
        
        // 이미지 확대보기 샘플
        // 1. css링크 <?xml-stylesheet href="/resources/css/magnific-popup.css" type="text/css"?>
        // 2. js링크 <script type="text/javascript" src="/resources/js/lib/util/jquery.magnific-popup.min.js"></script>
        // 3. xml소스 추가 <xf:group id="imgAflAn" tagname="a"><xf:image id="imgAfl" src="/resources/images/layout/content_main.png" style="width:100px;height:100px;"></xf:image></xf:group>
        // 4. 이하 소스 추가
        $("#"+imgAflAn.id).attr("href", imgAfl.getSrc());
        
        // 일반확대 팝업 스타일
        $("#"+imgAflAn.id).magnificPopup({
            type: 'image',
            closeOnContentClick: true,
            mainClass: 'mfp-img-mobile',
            image: { verticalFit: true }
        });

        // 점층적으로 확대되는 스타일
        /*
        $("#"+imgAflAn.id).magnificPopup({
            type: 'image',
            closeOnContentClick: true,
            closeBtnInside: false,
            fixedContentPos: true,
            mainClass: 'mfp-no-margins mfp-with-zoom',
            image: { verticalFit: true },
            zoom: { enabled: true, duration: 300 }
        });
        */
        
        // 보수적 방법 : 현재사용안함(클릭이벤트에 입력)
        /*
        var img = new Image();
        img.src = imgAfl.getSrc();
        var win_width = img.width;
        var win_height = img.height;
        var OpenWindow = window.open('','_blank', 'width='+win_width+', height='+win_height+', menubars=no, scrollbars=auto');
        OpenWindow.document.write("<style>body{margin:0px;}</style><img src='"+imgAfl.getSrc()+"'>");
        */        
    };

	/**************************************************************************
	 * [2] 전역변수 선언
	 **************************************************************************/

	scwin.add = ""; //신규일때

	/**************************************************************************
	 * [3] Event 정의
	 **************************************************************************/

	// Printmade3 인쇄 버튼 클릭 이벤트 핸들러
	scwin.btnPrint_onclick = function(e) {
		// 예1) 프레임(Frame) 인쇄 시
		// onclick="PTMPrintWebPage({frame_name:'frameId',cutrect:'0,0,0,0'});"

		// 예2) 엘리먼트(Tag or Element) 인쇄 시
		// onclick="PTMPrintWebPage({elementid:'#ib20_content_frame',cutrect:'0,0,0,0'});"
		// # 엘리먼트 ID 입력시 “#” 이 반드시 추가되어야 함.		

		/*
		Parameter	의미
		frame_name	원하는 프레임의 name 또는 id를 입력한다. 전체 페이지 캡쳐이면 빈 스트링 '' 을 넣는다. (frame이 1개라면 굳이 넘겨주지 않아도됨)
		elementid	캡쳐하려는 Element의 id를 넣는다. CSS Selector 처럼 #[id] 형태로 넣는다. (아이디를 넣어 주지 않을시 페이지 전체 인쇄)
		objectcapture	스크롤 캡쳐의 작동여부를 설정한다. 플래시가 존재할 때 주로 설정한다. 0은 작동안함, 1은 작동함.(true,false)
		cutrect	캡쳐된 이미지를 인쇄할 때 '상,우,하,좌' 를 얼만큼 잘라낼 것인가를 설정한다.
		formvar	양식파일에 지정된 사용자 변수에 대한 값을 넣는다.
		formurl	양식파일의 경로를 지정한다. 지정되지 않으면 FORMURL 전역변수를 사용한다.
		 */

		// 현재 페이지에서 부를 때
		/*
		PTMPrintWebPage({
			frame_name: "tacMain_contents_0314_body",
			elementid: "#grpContent",
			cutrect: "0,0,0,0"
		});
		 */

		// 상단 페이지에서 부를 때 
		parent.scwin.printPM3({
			frame_name : "tacMain_contents_0314_body",
			elementid : "#grpContent",
			//**btn:0,
			cutrect : "0,0,0,0"
		});
	};

	// Printmade3 인쇄 버튼 클릭 이벤트 핸들러 (버튼제한)
	scwin.btnPrintSub_onclick = function(e) {
		// 상단 페이지에서 부를 때 
		parent.scwin.printPM3({
			frame_name : "tacMain_contents_0314_body",
			elementid : "#grpContent",
			btn : 1,
			cutrect : "0,0,0,0"
		});
	};

	// HTML2CANVAS 캡처 버튼 클릭 이벤트 핸들러
    scwin.btnPrintCanvas_onclick = function() {
        var area    = $("#"+gridMain.id);        
        var areaId  = gridMain.id;
        var eWidth  = area.get(0).scrollWidth;
        var eHeight = area.get(0).scrollHeight;
        html2canvas(document.getElementById(areaId),    {
            width: eWidth, 
            height: eHeight
            }).then (function(canvas) {        

                var imgData = canvas.toDataURL();
                var popOps = {
                    id : "popup0",
                    url : "/ux/template/pagePrint/html2canvas.xml",
                    type : "browser",
                    popup_name : "이미지미리보기",                    
                    width  : eWidth,
                    height : eHeight,
                    data : {
                        img : imgData
                    }                    
                };
                com.popup_open(popOps);
        });          
    };

    scwin.fnCallback = function(result, e) {
        console.log(e);

        var href = "/cf/CF00350000P/downloadMAV?aflp="+result.data.aflVo.aflp;
        var popOps = {
            id : "popup0",
            url : "/ux/template/pagePrint/html2canvas.xml",
            width:"800px",
            type : "browser",
            popup_name : "HTML2CANVAS 캡처",
            data : { img : href }
        };
        com.popup_open(popOps);
    };

	//과정/교관평가 설문조사 문항관리 조회 
	scwin.btnSearch_onclick = function(e) {
		scwin.selGrMaindList();
	};

	//문제(메인) 그리드 클릭 이벤트
	scwin.grdListMain_oncellclick = function(row, col) {
		if (row == null || row == "") {
			row = 0;
		}

		//메인 세부 조회
		scwin.selMainDlList(row, col);

		//상세 조회
		scwin.selGrDetailList(row, col);

	};

	//훈련 Type 문항 CateGory 변경     
	scwin.radViewTrngTyp_onviewchange = function(info) {
		var filTrngTyp = radViewTrngTyp.getValue(); //훈련타입 

		//문항 CateGory		
		ldlCode00210.removeColumnFilterAll();
		ldlCode00210.setColumnFilter({
			type : "row",
			colIndex : "classCd",
			key : filTrngTyp,
			condition : "and"
		});
	};

	//문제형식에 따라 상세 여부
	scwin.radViewAnswerTyp_onviewchange = function(info) {

		//답변형식 S주식관 O 객관식
		var checkAnswerTyp = radViewAnswerTyp.getValue();
		if (checkAnswerTyp == "S") {
			detailName.hide();
			detailGrid.hide();
		} else {
			detailName.show();
			detailGrid.show();
		}
	};

	//문제 신규추가
	scwin.btnMainD_onclick = function(e) {

		scwin.add = "1";
		if (btnSave) {
			btnSave.setDisabled(false);
		}
		if (btnDetailAdd) {
			btnDetailAdd.setDisabled(false);
		}

		grdListMain.removeFocusedCell();
		scwin.grdListMain_oncellclick(-1);
	};

	//저장
	scwin.btnSave_onclick = function(e) {
		//저장전 필수체크
		if (scwin.saveCheck() == false) {
			return true;
		}

		scwin.saveList();
	};

	/**************************************************************************
	 * [4] Callback 
	 **************************************************************************/

	//과정/교관평가 설문조사 문항관리 조회후처리
	scwin.selAdmSurveyQuestionMainListCalback = function(result, e) {

		if (!result) {
			return;
		}

		//데이터반환
		dlDataMainList.setJSON(result.listSelectMain);

		if (btnSave) {
			btnSave.setDisabled(false);
		}
		if (btnDetailAdd) {
			btnDetailAdd.setDisabled(false);
		}

		var MainCheck = dlDataMainList.getRowCount();

		if (MainCheck <= 0) {
			//문제 데이터가 없어면 세부 상황 초기화 한다
			scwin.mainDreset();

			//문항 CateGory 초기화		
			ldlCode00210.removeColumnFilterAll();
			ldlCode00210.setColumnFilter({
				type : "row",
				colIndex : "classCd",
				key : "",
				condition : "and"
			});

			return;
		}

		grdListMain.setFocusedCell(0, "questionNbr", true);

		scwin.grdListMain_oncellclick();
	}

	//과정/교관평가 설문조사 문항관리 메인 세부 조회후처리
	scwin.selAdmSurveyQuestionMainDtlListCalback = function(result, e) {

		dlDataMainDelList.setJSON(result.listSelectMain);

		radViewTrngTyp.setValue(dlDataMainDelList.getCellData(0, "trngTyp"));

		var filTrngTyp = radViewTrngTyp.getValue(); //훈련타입 

		//문항 CateGory		
		ldlCode00210.removeColumnFilterAll();
		ldlCode00210.setColumnFilter({
			type : "row",
			colIndex : "classCd",
			key : filTrngTyp,
			condition : "and"
		});

		chkViewActiveFlg
				.setValue(dlDataMainDelList.getCellData(0, "activeFlg"));
		radViewAnswerTyp
				.setValue(dlDataMainDelList.getCellData(0, "answerTyp"));
		radViewPollTyp.setValue(dlDataMainDelList.getCellData(0, "pollTyp"));
		txtViewSortOrdr.setValue(dlDataMainDelList.getCellData(0, "sortOrdr"));
		sbxViewquestionCategory.setValue(dlDataMainDelList.getCellData(0,
				"questionCategory"));
		txtViewQuestionTxt.setValue(dlDataMainDelList.getCellData(0,
				"questionTxt"));
		txtViewQuestionTxtEng.setValue(dlDataMainDelList.getCellData(0,
				"questionTxtEng"));

		if (scwin.add == "1") {
			radViewTrngTyp.setSelectedIndex(0);
			chkViewActiveFlg.setValue("Y");
			radViewAnswerTyp.setSelectedIndex(0);
			radViewPollTyp.setSelectedIndex(0);

			scwin.add = "";
		}

		//문제 형식에 따른 상세View 여부	
		scwin.radViewAnswerTyp_onviewchange();
	}

	//요구량조회후처리
	scwin.selAdmSurveyQuestionDetailListCalback = function(result, e) {
		//데이터반환
		dlDataDetailList.setJSON(result.listSelectDetail);
	}

	//저장후처리  
	scwin.saveAdmSurveyQuestionDetailListCalback = function(result, e) {
		//재조회
		scwin.btnSearch_onclick();
	};

	/**************************************************************************
	 * [5] 사용자정의 함수
	 **************************************************************************/

	//과정/교관평가 설문조사 저장체크
	scwin.saveCheck = function() {

		var chkViewSortOrdr = txtViewSortOrdr.getValue(); //문항순서
		var chkViewQuestionTxt = txtViewQuestionTxt.getValue(); //문항한글
		var chkViewQuestionTxtEng = txtViewQuestionTxtEng.getValue(); //문항영어

		if (chkViewSortOrdr == "" || chkViewSortOrdr == null) {
			alert(commLib.getMessage("valid.0058"));
			txtViewSortOrdr.focus();

			return false;
		}

		if (chkViewQuestionTxt == "" || chkViewQuestionTxt == null) {
			alert(commLib.getMessage("valid.0059"));
			txtViewQuestionTxt.focus();

			return false;

		}

		if (chkViewQuestionTxtEng == "" || chkViewQuestionTxtEng == null) {

			alert(commLib.getMessage("valid.0060"));
			txtViewQuestionTxtEng.focus();

			return false;
		}

		var detAnswerTyp = radViewAnswerTyp.getValue(); //문제형식	
		var detCount = dlDataDetailList.getRowCount(); //상세개수

		if (detAnswerTyp == "O") {
			var checkCategory = sbxViewquestionCategory.getValue();

			if (checkCategory == "" || checkCategory == null) {
				alert(commLib.getMessage("valid.0162"));
				sbxViewquestionCategory.focus();

				return false;
			}

			if (detCount > 0) {

				for (var i = 0; i < detCount; i++) {
					var checkExampleTxt = dlDataDetailList.getCellData(i,
							"exampleTxt"); //답변한글
					var checkExampleTxtEng = dlDataDetailList.getCellData(i,
							"exampleTxtEng"); //답변영문
					var checkSortOrdr = dlDataDetailList.getCellData(i,
							"sortOrdr"); //순서

					if (checkExampleTxt == "" || checkExampleTxt == null) {

						alert(commLib.getMessage("valid.0061"));
						grdListDetail.setFocusedCell(i, "exampleTxt", true);

						return false;

					}

					if (checkExampleTxtEng == "" || checkExampleTxtEng == null) {

						alert(commLib.getMessage("valid.0062"));
						grdListDetail.setFocusedCell(i, "exampleTxtEng", true);

						return false;

					}

					if (checkSortOrdr == "" || checkSortOrdr == null) {
						alert(commLib.getMessage("valid.0063"));
						grdListDetail.setFocusedCell(i, "sortOrdr", true);

						return false;
					}
				}
			} else {
				alert(commLib.getMessage("valid.0109"));
				return false;
			}
		}
		return true;
	}
]]></script>
	</head>
	<body ev:onpageload="scwin.onpageload">
	    <xf:group id="grpContent" class="sub_contentsbox">
	        <!-- <xf:group class="pgtbox">
	            <w2:textbox class="pgt_tit" label="Printmade3" />
	            </xf:group>
	            <xf:group class="dfbox">
	            <xf:group class="fl">
	            <xf:trigger id="btnPrint" type="button" class="btn_cm" ev:onclick="scwin.btnPrint_onclick">
	            <xf:label><![CDATA[Printmade3 인쇄]]></xf:label>
	            </xf:trigger>
	            <xf:trigger id="btnPrintSub" type="button" class="btn_cm" ev:onclick="scwin.btnPrintSub_onclick">
	            <xf:label><![CDATA[Printmade3 인쇄 (버튼제한)]]></xf:label>
	            </xf:trigger>
	            <xf:trigger id="btnPrint2" type="button" class="btn_cm" ev:onclick="scwin.btnPrint2_onclick">
	            <xf:label><![CDATA[HTML2CANVAS 캡처]]></xf:label>
	            </xf:trigger>
	            </xf:group>
	            </xf:group> -->
	        <xf:group class="gvwbox">
	            <w2:gridView id="gridMain" dataList="dl_sample01" class="wq_gvw" autoFit="allColumn" visibleRowNum="all"
	                ev:oncellclick="scwin.gridMain_oncellclick">
	                <w2:header id="header1">
	                    <w2:row id="row1">
	                        <w2:column id="hcolumn29" inputType="text" width="80" value="text" />
	                        <w2:column id="hcolumn27" inputType="text" width="180" value="link" />
	                        <w2:column id="hcolumn25" inputType="text" width="80" value="checkbox" />
	                        <w2:column id="hcolumn23" inputType="text" width="80" value="button" />
	                        <w2:column id="hcolumn21" inputType="text" width="80" value="image" />
	                        <w2:column id="hcolumn19" inputType="text" width="80" value="radio" />
	                        <w2:column id="hcolumn17" inputType="text" width="80" value="select" />
	                        <w2:column id="hcolumn15" inputType="text" width="100" value="calendar" />
	                        <w2:column id="hcolumn13" inputType="text" width="200" value="expression" />
	                        <w2:column id="hcolumn11" inputType="text" width="200" value="textarea" />
	                        <w2:column id="hcolumn09" inputType="text" width="100" value="textImage" />
	                        <w2:column id="hcolumn07" inputType="text" width="150" value="checkcombobox" />
	                        <w2:column id="hcolumn05" inputType="text" width="100" value="autoComplete" />
	                        <w2:column id="hcolumn03" inputType="text" width="100" value="secret" />
	                    </w2:row>
	                </w2:header>
	                <w2:gBody id="gBody1">
	                    <w2:row id="row2">
	                        <w2:column id="col1" width="70" inputType="text" textAlign="left" />
	                        <w2:column id="col2" width="70" inputType="link" textAlign="left" />
	                        <w2:column id="col3" width="70" inputType="checkbox" valueType="boolean" />
	                        <w2:column id="col4" width="70" inputType="button" />
	                        <w2:column id="col5" width="70" inputType="image" imageClickFunction="scwin.fnImgClick" />
	                        <w2:column id="col6" width="70" inputType="radio" valueType="boolean" />
	                        <w2:column id="col7" width="70" inputType="select" viewType="icon">
	                            <w2:choices>
	                                <w2:item>
	                                    <w2:label><![CDATA[남]]></w2:label>
	                                    <w2:value><![CDATA[M]]></w2:value>
	                                </w2:item>
	                                <w2:item>
	                                    <w2:label><![CDATA[여]]></w2:label>
	                                    <w2:value><![CDATA[F]]></w2:value>
	                                </w2:item>
	                            </w2:choices>
	                        </w2:column>
	                        <w2:column id="col8" width="70" inputType="calendar" />
	                        <w2:column id="col9" expression="display('col1') + '-' + display('col2')" width="70"
	                            inputType="expression" textAlign="left" />
	                        <w2:column id="col10" width="70" inputType="textarea" textAlign="left" />
	                        <w2:column id="col11" imageSrc="/resources/images/content/btn_cmm.png" width="70"
	                            inputType="textImage" viewType="icon" imageClickFunction="scwin.fnTxtImgClick" />
	                        <w2:column id="col12" width="70" inputType="checkcombobox" viewType="icon">
	                            <w2:choices>
	                                <w2:item>
	                                    <w2:label><![CDATA[남]]></w2:label>
	                                    <w2:value><![CDATA[M]]></w2:value>
	                                </w2:item>
	                                <w2:item>
	                                    <w2:label><![CDATA[여]]></w2:label>
	                                    <w2:value><![CDATA[F]]></w2:value>
	                                </w2:item>
	                            </w2:choices>
	                        </w2:column>
	                        <w2:column id="col13" width="70" inputType="autoComplete">
	                            <w2:choices>
	                                <w2:itemset nodeset="data:ldl_religion">
	                                    <w2:label ref="name"></w2:label>
	                                    <w2:value ref="code"></w2:value>
	                                </w2:itemset>
	                            </w2:choices>
	                        </w2:column>
	                        <w2:column id="col14" width="70" inputType="secret" />
	                    </w2:row>
	                </w2:gBody>
	            </w2:gridView>
	        </xf:group>
			<xf:group class="pgtbox">
			</xf:group>
			<xf:group class="shbox">
				<xf:group class="shbox_inner">
					<xf:group class="dtb">
						<xf:group class="dtb_col">
							<xf:group class="dtb_tit">
							</xf:group>
							<xf:group class="dtb_cont">
							</xf:group>
						</xf:group>
						<xf:group class="dtb_col">
							<xf:group class="dtb_cont">
							</xf:group>
						</xf:group>
						<xf:group class="dtb_col">
							<xf:group class="dtb_tit">
							</xf:group>
							<xf:group class="dtb_cont">
							</xf:group>
						</xf:group>
						<xf:group class="dtb_col">
							<xf:group class="dtb_tit">
							</xf:group>
							<xf:group class="dtb_cont">
							</xf:group>
						</xf:group>
					</xf:group>
				</xf:group>
				<xf:group class="btn_shbox">
				</xf:group>
			</xf:group>
			<xf:group class="gvwbox mt5">
				<w2:gridView autoFit="allColumn" class="wq_gvw" dataList="dlDataMainList" id="grdListMain"
					rowNumHeaderValue="No" rowNumVisible="false" rowNumWidth="50" rowStatusHeaderValue="State" rowStatusVisible="false"
					rowStatusWidth="50" scrollByColumn="false" style="height:200px;" ev:oncellclick="scwin.grdListMain_oncellclick">
	                <w2:header id="header1">
	                    <w2:row id="row1">
	                        <w2:column id="column17" inputType="text" style="height:30px;" value="문항ID" width="60" />
	                        <w2:column id="column15" inputType="text" style="height:30px;" value="훈련 Type" width="90" />
	                        <w2:column id="column13" inputType="text" style="height:30px;" value="문항순서" width="80" />
	                        <w2:column id="column11" inputType="text" style="height:30px;" value="평가종류" width="80" />
	                        <w2:column id="column9" inputType="text" style="height:30px;" value="Category" width="100" />
	                        <w2:column id="column7" inputType="text" style="height:30px;" value="문항" width="250" />
	                        <w2:column id="column19" inputType="text" style="height:30px;" value="답변 Type" width="90" />
	                        <w2:column id="column25" inputType="text" style="height:30px;" value="예제" width="200" />
	                        <w2:column id="column23" inputType="text" style="height:30px;" value="ACTIVE" width="80" />
	                    </w2:row>
	                </w2:header>
	                <w2:gBody id="gBody1">
	                    <w2:row id="row2">
							<w2:column id="questionNbr" inputType="text" style="height:28px;" width="60" readOnly="true" />
							<w2:column id="trngTyp" inputType="text" style="height:28px;" width="90" readOnly="true" />
							<w2:column id="sortOrdr" inputType="text" style="height:28px;" width="80" readOnly="true" />
							<w2:column id="pollTyp" inputType="select" style="height:28px;" width="80" readOnly="true">
								<w2:choices>
									<w2:itemset nodeset="data:ldlCode00190">
										<w2:label ref="cdName"></w2:label>
										<w2:value ref="commCd"></w2:value>
									</w2:itemset>
								</w2:choices>
							</w2:column>
							<w2:column id="questionCategoryName" inputType="text" style="height:28px;" width="100" textAlign="left"
								readOnly="true" />
							<w2:column id="questionTxt" inputType="text" style="height:28px;" width="250" textAlign="left"
								readOnly="true" />
							<w2:column id="answerTyp" inputType="select" style="height:28px;" width="90" readOnly="true">
								<w2:choices>
									<w2:itemset nodeset="data:ldlCode00200">
										<w2:label ref="cdName"></w2:label>
										<w2:value ref="commCd"></w2:value>
									</w2:itemset>
								</w2:choices>
							</w2:column>
							<w2:column id="text" inputType="text" style="height:28px" width="200" readOnly="true" textAlign="left" />
							<w2:column id="activeFlg" inputType="checkbox" style="height:28px" width="80" valueType="other"
								trueValue="Y" falseValue="N" readOnly="true" />

	                    </w2:row>
	                </w2:gBody>
	            </w2:gridView>
	        </xf:group>

	        <xf:group>
	            <xf:trigger id="btnPrintCanvas" type="button" class="btn_cm"
	                ev:onclick="scwin.btnPrintCanvas_onclick">
	                <xf:label><![CDATA[그리드 캡처 테스트 버튼]]></xf:label>
	            </xf:trigger>
	        </xf:group>

            <w2:span style="width:174px;height:74px;" label="이미지 확대보기 샘플==>"></w2:span>
            
            <!-- 이하 그룹 : 확대처리 소스 -->
	        <xf:group id="imgAflAn" tagname="a">
                <xf:image id="imgAfl" src="/resources/images/layout/content_main.png" style="width:100px;height:100px;"></xf:image>
            </xf:group>

	    </xf:group>
	    
	</body>
</html>