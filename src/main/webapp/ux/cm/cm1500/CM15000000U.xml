<?xml version="1.0" encoding="UTF-8"?>
<!-- <?xml-stylesheet href="/src/main/webapp/resources_ux/css/common.css" type="text/css"?>
<?xml-stylesheet href="/src/main/webapp/resources_ux/css/content.css" type="text/css"?> -->

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:w2="http://www.inswave.com/websquare"
	xmlns:xf="http://www.w3.org/2002/xforms">
	<head>
		<w2:type>DEFAULT</w2:type>
		<w2:buildDate />
		<xf:model>
			<xf:instance>
				<data xmlns="" />
			</xf:instance>
			<w2:dataCollection baseNode="map">
			    <w2:dataList baseNode="list" repeatNode="map" style="" id="dsTcmActbgtConfmList"
			        saveRemovedData="true">
			        <w2:columnInfo>
			            <w2:column id="siteCd" name="현장코드" dataType="text"></w2:column>
			            <w2:column id="siteNm" name="현장명" dataType="text"></w2:column>
			            <w2:column id="bzpjGbCd" name="사업구분코드" dataType="text"></w2:column>
			            <w2:column id="bzpjGbNm" name="사업구분명" dataType="text"></w2:column>
			            <w2:column id="publCvlGbCd" name="공사구분코드" dataType="text"></w2:column>
			            <w2:column id="publCvlGbNm" name="공사구분명" dataType="text"></w2:column>
			            <w2:column id="slProdTypeCd" name="영업상품유형코드" dataType="text"></w2:column>
			            <w2:column id="slProdTypeNm" name="영업상품유형명" dataType="text"></w2:column>
			            <w2:column id="chrgrEmpnm" name="담당자명" dataType="text"></w2:column>
			            <w2:column id="actbgtConfmStusNm" name="진행상태명" dataType="text"></w2:column>


			        </w2:columnInfo>
			        <w2:data use="true">
			            <!-- <w2:row></w2:row>
			                <w2:row></w2:row>
			                <w2:row></w2:row>
			                <w2:row></w2:row>
			                <w2:row></w2:row>
			                <w2:row></w2:row>
			                <w2:row></w2:row>
			                <w2:row></w2:row>
			                <w2:row></w2:row> -->
			        </w2:data>
			    </w2:dataList>
			    <w2:dataMap baseNode="map" id="dsSearchMap">
			        <w2:keyInfo>
			            <w2:key id="siteNm" name="현장명" dataType="text"></w2:key>
			            <w2:key id="publCvlGbCd" name="공사구분" dataType="text"></w2:key>
			            <w2:key id="actbgtConfmStusCd" name="진행상태" dataType="text"></w2:key>
			            <w2:key id="bzpjGbCd" name="사업구분코드" dataType="text"></w2:key>
			            <w2:key id="listSearchYn" name="리스트화면조회여부" dataType="text"></w2:key>
			        </w2:keyInfo>
			    </w2:dataMap>
			    <w2:dataList baseNode="list" id="dsCdSA011" repeatNode="map" saveRemovedData="true" style="">
			        <w2:columnInfo>
			            <w2:column dataType="text" id="cd" name="코드"></w2:column>
			            <w2:column dataType="text" id="cdNm" name="코드명"></w2:column>
			            <w2:column dataType="text" id="engNm" name="영문_명"></w2:column>
			            <w2:column dataType="text" id="abbNm" name="약어_명"></w2:column>
			            <w2:column dataType="text" id="upperCd" name="상위코드"></w2:column>
			            <w2:column dataType="text" id="cdLv" name="코드레벨"></w2:column>
			            <w2:column dataType="text" id="cdOdr" name="코드순서"></w2:column>
			            <w2:column dataType="text" id="charValN1" name="문자_값_1"></w2:column>
			            <w2:column dataType="text" id="charValN2" name="문자_값_2"></w2:column>
			            <w2:column dataType="text" id="charValN3" name="문자_값_3"></w2:column>
			            <w2:column dataType="text" id="charValN4" name="문자_값_4"></w2:column>
			            <w2:column dataType="text" id="charValN5" name="문자_값_5"></w2:column>
			            <w2:column dataType="text" id="nmbrValN1" name="숫자_값_1"></w2:column>
			            <w2:column dataType="text" id="nmbrValN2" name="숫자_값_2"></w2:column>
			            <w2:column dataType="text" id="nmbrValN3" name="숫자_값_3"></w2:column>
			            <w2:column dataType="text" id="nmbrValN4" name="숫자_값_4"></w2:column>
			            <w2:column dataType="text" id="nmbrValN5" name="숫자_값_5"></w2:column>
			            <w2:column dataType="text" id="useYn" name="사용유무"></w2:column>
			            <w2:column dataType="text" id="epntYn" name="말단_여부"></w2:column>
			            <w2:column dataType="text" id="commCd" name="공통코드"></w2:column>
			            <w2:column dataType="text" id="commDtlCd" name="공통상세코드"></w2:column>
			        </w2:columnInfo>
			        <w2:data use="false"></w2:data>
			    </w2:dataList>
			    <w2:dataList baseNode="list" id="dsCdCM004004" repeatNode="map" saveRemovedData="true" style="">
			        <w2:columnInfo>
			            <w2:column dataType="text" id="cd" name="코드"></w2:column>
			            <w2:column dataType="text" id="cdNm" name="코드명"></w2:column>
			            <w2:column dataType="text" id="engNm" name="영문_명"></w2:column>
			            <w2:column dataType="text" id="abbNm" name="약어_명"></w2:column>
			            <w2:column dataType="text" id="upperCd" name="상위코드"></w2:column>
			            <w2:column dataType="text" id="cdLv" name="코드레벨"></w2:column>
			            <w2:column dataType="text" id="cdOdr" name="코드순서"></w2:column>
			            <w2:column dataType="text" id="charValN1" name="문자_값_1"></w2:column>
			            <w2:column dataType="text" id="charValN2" name="문자_값_2"></w2:column>
			            <w2:column dataType="text" id="charValN3" name="문자_값_3"></w2:column>
			            <w2:column dataType="text" id="charValN4" name="문자_값_4"></w2:column>
			            <w2:column dataType="text" id="charValN5" name="문자_값_5"></w2:column>
			            <w2:column dataType="text" id="nmbrValN1" name="숫자_값_1"></w2:column>
			            <w2:column dataType="text" id="nmbrValN2" name="숫자_값_2"></w2:column>
			            <w2:column dataType="text" id="nmbrValN3" name="숫자_값_3"></w2:column>
			            <w2:column dataType="text" id="nmbrValN4" name="숫자_값_4"></w2:column>
			            <w2:column dataType="text" id="nmbrValN5" name="숫자_값_5"></w2:column>
			            <w2:column dataType="text" id="useYn" name="사용유무"></w2:column>
			            <w2:column dataType="text" id="epntYn" name="말단_여부"></w2:column>
			            <w2:column dataType="text" id="commCd" name="공통코드"></w2:column>
			            <w2:column dataType="text" id="commDtlCd" name="공통상세코드"></w2:column>
			        </w2:columnInfo>
			        <w2:data use="false"></w2:data>
			    </w2:dataList>
			</w2:dataCollection>
			<w2:workflowCollection></w2:workflowCollection>
		</xf:model>

		<script type="javascript" ><![CDATA[

/**************************************************************************
 * [1] onpageload(초기화포함)
 **************************************************************************/
    scwin.onpageload = function() {

        //추가 코드값 맵핑 호출
        scwin.fnInitial();
    };

    /** 화면초기화 **/
    scwin.fnInitial = function() {

        //코드 셋팅
        com.selCdListVrbl( "sbxBzpjGbCd", {
                "upperCd": "CF074"
            },
            function(){
                //파라미터 셋팅
                if (com.isEmpty(gcm.tab_main)) {
                    dsSearchMap.setJSON(JSON.parse($w.getPopupParam()).data);
                } else {
                    dsSearchMap.setJSON(com.getMenuParam());
                    if (dsSearchMap.get("listSearchYn") == "Y"){
                        scwin.btnFind_onclick();
                    }
                }
            }
        );

        com.selCdList( "sbxPublCvlGbCd", "SA011", "Y");
        com.selCdList( "sbxActbgtConfmStusCd", "CM004004", "Y");

        com.commonUI();
        //grpSearch.init();                   //조회그룹 초기화
    };

/**************************************************************************
 * [2] Event 정의
 **************************************************************************/

    //조회 클릭
	scwin.btnFind_onclick = function() {
        ajaxLib.ajax("/cm/cm1500/CM15000000U/selectTcmActbgtConfmList", {
            method: "POST",
            requestData: dsSearchMap.getJSON(),
            callback: function(result, e){
                dsTcmActbgtConfmList.setJSON(result.data);
                com.setUdcValue("dsTcmActbgtConfmListCount", "udcListCount", dsTcmActbgtConfmList.getRowCount());
            },
            errCallback: function(result, e) {
                console.log(result);
            }
        });
	};

    //그리드 셀클릭
    scwin.grdTcmActbgtConfmList_oncellclick = function(row,col) {

        var sColunmName = grdTcmActbgtConfmList.getColumnID( col );
        if (sColunmName == "siteNm") {

            com.detailOpen("실행예산확정작업(상세)", "CM15000005U", "/ux/cm/cm1500/CM15000005U.xml", "1", {
                searhSiteNm: dsSearchMap.get("siteNm"),
                searhPublCvlGbCd: dsSearchMap.get("publCvlGbCd"),
                searhActbgtConfmStusCd: dsSearchMap.get("actbgtConfmStusCd"),
                searhBzpjGbCd: dsSearchMap.get("bzpjGbCd"),
                siteCd: dsTcmActbgtConfmList.getCellData(row, "siteCd"),
                siteNm: dsTcmActbgtConfmList.getCellData(row, "siteNm")
            });
        }

    };

    //조회조건 현장 엔터
	scwin.sbxSiteNm_onkeydown = function(e) {
        if(e.key=="Enter"){
            scwin.btnFind_onclick();
        }
	};

    //엑셀다운 클릭
	scwin.btnExcelDwn_onclick = function() {
        grdTcmActbgtConfmList.advancedExcelDownload({
            fileName:"실행예산확정작업목록.xlsx",
            useSubTotal : true,             // Sub-Total 표시 
            headerFontColor : "#FFFFFF",    // Header Font Color
            headerColor : "#D9D9D9",        // Header Back Color
            subTotalColor : "#FCE4D6",      // SubTotal Back Color
            footerColor : "#BDD7EE"         // Footer Color
        });
	};
	]]></script>


		<w2:require src="/ux/common/udc/udcListCount.xml"></w2:require>
		<w2:require src="/ux/common/udc/udcPeriodcalendar.xml"></w2:require>
	</head>
	<body ev:onpageload="scwin.onpageload" ev:onpageunload="scwin.onpageunload">

		<xf:group style="" id="" class="content_body">
			<xf:group class="navigator_wrap" id="" style="">
				<w2:wframe id="wfm_title" src="/ux/common/navigator.xml" style=""></w2:wframe>
		    </xf:group>
            <xf:group class="tbl_search" id="" style="">


				<xf:group class="tb_list" id="" style="" tagname="table">
					<w2:attributes>
						<w2:summary>조회조건 테이블 입니다.</w2:summary>
					</w2:attributes>
					<xf:group tagname="colgroup">
					    <xf:group style="width:97.00px;" tagname="col"></xf:group>
					    <xf:group style="width:auto;" tagname="col"></xf:group>
					    <xf:group style="width:110.00px;" tagname="col"></xf:group>
					    <xf:group style="width:auto;" tagname="col"></xf:group>
					    <xf:group style="width:110.00px;" tagname="col"></xf:group>
					    <xf:group style="width:auto;" tagname="col"></xf:group>
					    <xf:group style="width:110.00px;" tagname="col"></xf:group>
					    <xf:group style="width:auto;" tagname="col"></xf:group>
					</xf:group>
					<xf:group style="" tagname="tr">
					    <xf:group class="w2tb_th" style="" tagname="th">
					        <w2:attributes>
					            <w2:scope>row</w2:scope>
					        </w2:attributes>
					        <w2:span class="" id="" label="현장" style=""></w2:span>
					    </xf:group>
					    <xf:group class="w2tb_td" style="" tagname="td">
					        <xf:input id="sbxSiteNm" style="width:246px;" ref="data:dsSearchMap.siteNm" ev:onkeydown="scwin.sbxSiteNm_onkeydown" ev:onblur="scwin.sbxSiteNm_onblur" ev:onkeyup="scwin.sbxSiteNm_onkeyup" maxlength="50" adjustMaxLength="true"></xf:input>
					    </xf:group>
					    <xf:group class="w2tb_th" style="" tagname="th">
					        <w2:attributes>
					            <w2:scope>row</w2:scope>
					        </w2:attributes>
					        <w2:span class="" id="" label="사업구분" style=""></w2:span>
					    </xf:group>
					    <xf:group class="w2tb_td" style="" tagname="td">
					        <xf:select1 allOption="" appearance="minimal" chooseOption="true" class="" direction="auto"
					            disabled="false" disabledClass="w2selectbox_disabled" displayMode="label" id="sbxBzpjGbCd"
					            ref="data:dsSearchMap.bzpjGbCd" style="width:100px;" submenuSize="auto" textAlign="left"
					            chooseOptionLabel="전체">
					            <xf:choices></xf:choices>
					        </xf:select1>
					    </xf:group>
					    <xf:group class="w2tb_th" tagname="th">
					        <w2:attributes>
					            <w2:scope>row</w2:scope>
					        </w2:attributes>
					        <w2:span class="" id="" label="공사구분" style=""></w2:span>
					    </xf:group>
					    <xf:group class="w2tb_td" tagname="td">
					        <w2:attributes></w2:attributes>
					        <xf:select1 allOption="" appearance="minimal" chooseOption="true" class="" direction="auto"
					            disabled="false" disabledClass="w2selectbox_disabled" displayMode="label" id="sbxPublCvlGbCd" ref="data:dsSearchMap.publCvlGbCd"
					            style="width:100px;" submenuSize="auto" textAlign="left" chooseOptionLabel="전체">
					            <xf:choices></xf:choices>
					        </xf:select1>
					    </xf:group>
					    <xf:group class="w2tb_th" tagname="th" style="">
					        <w2:attributes>
					            <w2:scope>row</w2:scope>
					        </w2:attributes>
					        <w2:span class="" id="" label="진행상태" style=""></w2:span>
					    </xf:group>
					    <xf:group class="w2tb_td" tagname="td" style="">
					        <w2:attributes></w2:attributes>
					        <xf:select1 allOption="" appearance="minimal" chooseOption="true" class="" direction="auto"
					            disabled="false" disabledClass="w2selectbox_disabled" displayMode="label" id="sbxActbgtConfmStusCd"
					            ref="data:dsSearchMap.actbgtConfmStusCd" style="width:100px;" submenuSize="auto" textAlign="left" chooseOptionLabel="전체">
					            <xf:choices></xf:choices>
					        </xf:select1>
					    </xf:group>
					</xf:group>
				</xf:group>
				<xf:group class="btn_tbl_search" style="" tagname="">
					<w2:anchor class="btn_sh" id="btnFind" outerDiv="false" style="" ev:onclick="scwin.btnFind_onclick">
						<xf:label><![CDATA[조회]]></xf:label>
					</w2:anchor>
					<!-- <w2:anchor class="btn_cm" id="anchor44" outerDiv="false" style="">
						<xf:label><![CDATA[상세조회]]></xf:label>
						</w2:anchor> -->
				</xf:group>

			</xf:group>

            <xf:group style="" id="" class="defaultbox">
                <w2:textbox label="실행예산확정작업 목록" style="" id="" class="df_tt" tagname="h3"></w2:textbox>
                <w2:udc_list_count id="dsTcmActbgtConfmListCount"></w2:udc_list_count>
                <xf:group class="right_wrap" id="" style="">
                    <xf:group id="" style="height:27px;">
                        <w2:anchor class="btn_gcm excel_down" clickEventElement=""
                            ev:onclick="scwin.btnExcelDwn_onclick" id="btnExcelDwn" localeRef="" outerDiv="false"
                            style="" toolTip="엑셀다운로드">
                            <xf:label><![CDATA[엑셀다운로드]]></xf:label>
                        </w2:anchor>
                    </xf:group>
                </xf:group>
            </xf:group>
            <w2:gridView autoFit="allColumn" class="autoHeight" dataList="data:dsTcmActbgtConfmList"
                fixedColumnWithHidden="true" focusMode="row" id="grdTcmActbgtConfmList" rowNumHeaderValue=""
                rowNumVisible="false" rowStatusHeaderValue="" rowStatusVisible="" rowStatusWidth="30"
                scrollByColumn="false" style="height: 300px;" useShiftKey="true" visibleRowNum="" sortable="true"
                resize="true" titleAuto="" readOnly="true" ev:oncellclick="scwin.grdTcmActbgtConfmList_oncellclick">
                <w2:header id="header1" style="">
                    <w2:row id="row2" style="">
                        <w2:column removeBorderStyle="false" width="40" inputType="text" style="" id="column55"
                            value="NO" blockSelect="true" displayMode="label">
                        </w2:column>
                        <w2:column removeBorderStyle="false" width="70" inputType="text" style="" id="column57"
                            value="현장코드" blockSelect="false" displayMode="label">
                        </w2:column>
                        <w2:column blockSelect="false" id="column21" inputType="text" style="" value="현장명" width="300"
                            sortable="true">
                        </w2:column>
                        <w2:column blockSelect="false" id="column19" inputType="text" style="" value="사업구분"
                            width="100">
                        </w2:column>
                        <w2:column removeBorderStyle="false" width="70" inputType="text" style="" id="column59"
                            value="공사구분코드" blockSelect="false" displayMode="label" hidden="true">
                        </w2:column>
                        <w2:column blockSelect="false" id="column17" inputType="text" style="" value="공사구분"
                            width="100">
                        </w2:column>
                        <w2:column blockSelect="false" id="column15" inputType="text" style="" value="상품" width="200">
                        </w2:column>
                        <w2:column blockSelect="false" displayMode="" id="column37" inputType="text"
                            removeBorderStyle="false" style="" value="담당자" width="100">
                        </w2:column>
                        <w2:column blockSelect="false" displayMode="label" id="column35" inputType="text"
                            removeBorderStyle="false" style="" value="진행상태" width="100">
                        </w2:column>
                    </w2:row>
                </w2:header>
                <w2:gBody id="gBody4" style="">
                    <w2:row id="row5" style="">
                        <w2:column removeBorderStyle="false" width="40" inputType="expression" style="" id="column56"
                            value="" blockSelect="false" displayMode="label" expression="rowIndex()+1">
                        </w2:column>
                        <w2:column removeBorderStyle="false" width="70" inputType="text" style="" id="siteCd" value=""
                            blockSelect="false" displayMode="label">
                        </w2:column>
                        <w2:column blockSelect="false" id="siteNm" inputType="link" style="" textAlign="left" value=""
                            width="300" displayMode="label">
                        </w2:column>
                        <w2:column blockSelect="false" class="" id="bzpjGbNm" inputType="text" style=""
                            textAlign="center" value="" width="100" displayMode="label">
                        </w2:column>
                        <w2:column removeBorderStyle="false" width="70" inputType="text" style="" id="column60" value=""
                            blockSelect="false" displayMode="label">
                        </w2:column>
                        <w2:column blockSelect="false" id="publCvlGbNm" inputType="text" style="" textAlign="center"
                            value="" width="100" displayMode="label">
                        </w2:column>
                        <w2:column blockSelect="false" id="slProdTypeNm" inputType="text" style="" textAlign="left"
                            value="" width="200" disabled="" displayMode="label" removeBorderStyle="false"
                            readOnly="true">
                        </w2:column>
                        <w2:column blockSelect="false" displayMode="label" id="chrgrEmpnm" inputType=""
                            removeBorderStyle="false" style="" textAlign="left" value="" width="100">
                        </w2:column>
                        <w2:column blockSelect="false" displayFormat="" displayMode="label" id="actbgtConfmStusNm"
                            inputType="text" removeBorderStyle="false" style="" textAlign="center" value=""
                            width="100">
                        </w2:column>
                    </w2:row>
                </w2:gBody>
            </w2:gridView>
		</xf:group>
	</body>
</html>
